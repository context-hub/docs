# Environment Variables

Context Generator supports the use of environment variables throughout your configuration files. You can define
environment variables in system settings, `.env` files, or use built-in predefined variables.

## Using Variables in Configuration

You can reference variables in your configuration using either `${VAR_NAME}` or `{{VAR_NAME}}` syntax. These variables
can be used in fields such as `description`, `content`, `urls`, `headers`, and more.

### Example

```yaml
documents:
  - description: System Information Report
    outputPath: system-info-${DATE}.md
    sources:
      - type: text
        description: System info as of ${DATETIME}
        content: |
          # System Information
          - Generated by: ${USER}
          - Hostname: ${HOSTNAME}
          - Operating System: ${OS}
          - Working Directory: ${PWD}
        tag: ${TAG}
```

## Supported Variable Providers

- **Environment Variables**: All system environment variables are supported.
- **Predefined Variables**: Common system values are built-in and available by default.
- **Custom Variables**: You can define your own variables in environment files.

## Built-in Predefined Variables

#### Date and Time

- `${DATETIME}` - Current date and time (e.g., `2024-03-22 14:33:00`)
- `${DATE}` - Current date (e.g., `2024-03-22`)
- `${TIME}` - Current time (e.g., `14:33:00`)
- `${TIMESTAMP}` - Current Unix timestamp

#### System Information

- `${USER}` - Current system user
- `${HOME_DIR}` - User's home directory
- `${TEMP_DIR}` - System temporary directory
- `${OS}` - Operating system name
- `${HOSTNAME}` - Computer hostname
- `${PWD}` - Current working directory

#### Environment Variables

Any environment variable available in your system can be used, such as:

- `${PATH}`
- `${LANG}`
- and others

## Loading Variables from `.env` Files

You can use the `--env` option when running the CLI to load environment variables from a file.

#### CLI Examples

```bash
# Load variables from the default .env file
ctx --env

# Load from a custom environment file
ctx --env=.env.local

# Do not load any environment variables (default behavior)
ctx
```

These variables will be resolved and substituted into the configuration at runtime.

### Variable Resolution

Context Generator uses a **composite provider mechanism**, allowing multiple sources of variables (env, predefined,
custom) to be resolved in order of priority. If a variable is defined in more than one place, the highest priority wins.

## Examples

### Environment variables with GitHub source

```yaml
documents:
  - description: Project Report for ${PROJECT_NAME}
    outputPath: reports/${PROJECT_NAME}-report.md
    sources:
      - type: github
        repository: ${GITHUB_ORG}/${REPO_NAME}
        description: Repository Analysis for ${PROJECT_NAME}
        sourcePaths:
          - src
        branch: ${BRANCH_NAME}
        githubToken: ${GITHUB_TOKEN}
```

### URL source with environment variables

```yaml
documents:
  - description: API Documentation from ${API_VERSION}
    outputPath: docs/api-${API_VERSION}.md
    sources:
      - type: url
        description: ${API_NAME} Documentation
        urls:
          - https://api.${ENV_NAME}.example.com/docs
          - https://${API_DOMAIN}/v${API_VERSION}/schema
        headers:
          Authorization: Bearer ${API_TOKEN}
          Accept-Language: ${LANGUAGE}
```

### Multiple environment variable formats

```yaml
documents:
  - description: Testing Environment Variables
    outputPath: tests/env-test.md
    sources:
      - type: text
        description: Testing different formats
        content: |
          # Environment Variable Test
          - Format 1: ${USER}
          - Format 2: {{USER}}
          - Timestamp: ${TIMESTAMP}
          - Custom variable: ${CUSTOM_VAR}
```